<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.css"></link>

</head>

<body>
    <header class="container">
        <div class="navbar">
            <div class="inner_navbar">
                <a href="index.html"><img src="https://wfdesignbuild.com/img/wf_logo_dy.svg" alt="logo" width="50%" height="50%"></a>
                <div class="menu">
                    <ul>
                        <li> <a href="services.html">Services</a></li>
                        <li> <a href="work.html">Work</a></li>
                        <li><a href="project.html">Start your Project</a></li>
                    </ul>
                </div>
            </div>

            <div id="bars">
                <i class='fas fa-bars fa-1x'></i>
            </div>
        </div>

    </header>

    <div class="project container">
        <div class="pj">
            <h1>Let's build something great together</h1>
            <p>Whatever you ambitions, we'd love to design and build your next big home additions or lend a hand with major renovation</p>
        </div>
        <div class="thank hidden">Thank You. We'd love to design and build your home decorations</div>
        <form class="container">
            <div class="form-group">
                <label for="">Name</label>
                <input name="name" type="text" placeholder="Name">
                <div class="error-hint hidden">Your name is required</div>
            </div>
            <div class="form-group">
                <label for="">Email address</label>
                <input name="email" type="text" placeholder="Email address">
                <div class="error-hint hidden">Your email is invalid</div>
            </div>
            <div class="form-group">
                <label for="">Phone Number</label>
                <input name="phone" type="text" placeholder="Phone Number">
                <div class="error-hint hidden">Phone is invalid</div>
            </div>
            <div class="form-group">
                <label for="">Home Address</label>
                <input type="text" name="address" placeholder="Home Address">
                <div class="error-hint hidden">Your address is required</div>
            </div>
            <div class="form-group">
                <label for="">How can we help?</label>
                <textarea name="message" cols="30" rows="7" placeholder="How can we help?"></textarea>
                <div class="error-hint hidden">Message is required</div>
            </div>


            <button class="submit" type="submit">Submit</button>
        </form>

    </div>

    <script>
        var nav = document.querySelector("#bars");
        var menu = document.querySelector(".menu");

        nav.addEventListener("click", function() {
            menu.classList.toggle("active");
        })

        //form
        const form = document.querySelector('form');
        //thank you
        const thank = document.querySelector('.thank');
        //name
        const nameInput = document.querySelector('input[name="name"]');
        //email
        const emailInput = document.querySelector('input[name="email"]');
        //phone
        const phoneInput = document.querySelector('input[name= "phone"]');
        //address
        const addInput = document.querySelector('input[name="address"]');
        //message
        const messageInput = document.querySelector('textarea[name="message"]');

        //arrayofinput
        const inputs = [nameInput, emailInput, phoneInput, addInput, messageInput];

        //validation email and phone
        const isValidEmail = (email) => {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        };

        const isValidPhone = (phone) => {
            const re = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
            return re.test(String(phone).toLowerCase());
        };


        //isFormValid declaration
        let isFormValid = false;

        //validation declaration
        let isValidationOn = false;

        //reset element
        const resetElm = (elm) => {
                elm.classList.remove("invalid")
                elm.nextElementSibling.classList.add("hidden");
            }
            //invalidate element
        const invalidateElm = (elm) => {
            elm.classList.add("invalid")
            elm.nextElementSibling.classList.remove("hidden");
        }

        //validate input
        const validateInputs = () => {
            if (!isValidationOn) return;

            //isFormValid
            isFormValid = true;
            inputs.forEach(resetElm);

            // //reset name input
            // resetElm(nameInput);
            // //reset email input
            // resetElm(emailInput);


            //condition name input
            if (!nameInput.value) {
                isFormValid = false;
                invalidateElm(nameInput);
            }
            //condition email input
            if (!isValidEmail(emailInput.value)) {
                isFormValid = false;
                invalidateElm(emailInput);
            }
            //condition phone input
            if (!isValidPhone(phoneInput.value)) {
                isFormValid = false;
                invalidateElm(phoneInput);
            }
            //condition address input
            if (!addInput.value) {
                isFormValid = false;
                invalidateElm(addInput);
            }

            //condition message input
            if (!messageInput.value) {
                isFormValid = false;
                invalidateElm(messageInput);
            }
        };

        //addEventListener submit
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            isValidationOn = true;
            validateInputs();

            //condition isFormValid
            if (isFormValid) {
                form.remove();
                thank.classList.remove("hidden");
            }
        });

        //addEventListener input
        inputs.forEach((input) => {
            input.addEventListener("input", () => {
                validateInputs();

            });
        });

        inputs.forEach((textarea) => {
            textarea.addEventListener("textarea", () => {
                validateInputs();

            });
        });
    </script>

</body>


</html>